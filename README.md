
# Ludicrous

A reimplementation of the Vanilla Minecraft Server in rust.

Runs version 1.21.6

Warning: This software is in very early development. Most features of the Vanilla Server software have not been properly implemented yet, so this is more of a proof of concept at this moment. Consider this software as unstable until further development and testing has occurred.

## Features

- Multithreaded chunkloading and terrain generation using tokio runtime
- Efficient network stack
- Runs on mappings obtained from ViaVersion (https://github.com/ViaVersion/Mappings) which makes updating easier
- Parity with Vanilla Minecraft for features such as:
    - Vanilla terrain generation and declarative terrain functions
    - Configuration files such as server.properties
    - World storage

## Upcoming Optimizations

- GPU-Accelerated terrain generation with OpenCL (almost complete)
- Optimized terrain density function evaluation method which may reduce recursion overhead and allows for additional optimizations

## Building

Requires the rust nightly toolchain.
`rustup toolchain install nightly`

Build the binary by running
```bash
cargo build --release
```
or
```bash
cargo run --release
```
and ensure that the `assets` folder containing the mappings is in the working directory of the binary.

The program will not generate a world so you also must provide a world in the working directory with at least a valid `level.dat` file.

*You could also build without the `--release` flag or with the `--dev` flag for faster build times, however this will make the binary a lot slower.

## Demos / Comparisons

Computer Hardware
- CPU: Ryzen 5 5600X 3.7GHz 6-Core
- Memory: 24GB DDR4 2400MHz
- GPU: RTX 3060 TI

Test Settings
- View Distance = 32 (4,225 total chunks)
- Encryption and Compression = enabled
- Vanilla and Paper tests use Aikar's flags for java gc optimization

The windows task manager was sometimes buggy such as it reporting 0% cpu usage for the application which is why I also included system cpu usage which did not have that problem.

**Pre-generated Chunk Loading Test**
> Test Details - Chunks are loaded in a specific direction and once a certain coordinate/area is reached, I stop to let chunks load. Once chunks are loaded, I go back the direction I came from and stop at the original location to load the chunks again. If chunks are struggling to load, I slow down to let them catch up.

https://github.com/user-attachments/assets/0eb6b1a4-4cec-413e-bac7-5181d9bbc8a6

*I was going to do a comparison test with Paper as well, which as far as I know does optimize vanilla chunkloading and generation. However, after some testing it seems to load chunks significantly slower than Vanilla and it's likely due to some factor or setting I am unaware of like connection throttling or something. Paper did behave better for the terrain generation test so I did include it for that.*

**Terrain Generation Test**
> Test Details - Timer is started when chunks start loading and stopped when edge of view distance no longer has chunks popping in. A chunks per second estimate is calculated by dividing the number of chunks loaded by seconds it took to load the chunks.

There are some important differences with this comparison which is that the Vanilla server is doing more work than ludicrous because I have only implemented landform generation whereas the Vanilla server also has to compute block types, light propagation, structures, biomes, etc. and is also probably writing data to the drive. However, landform generation is the most crucial part and is also probably the most computationally intensive so the comparison is probably still a good baseline.

https://github.com/user-attachments/assets/51184f4f-a4bc-4513-8991-9db811e2133c

https://github.com/user-attachments/assets/ef7b6eb1-ce26-4d92-b06e-1c42b8f8bb7f

**Pre-generated Chunk Load on Raspberry Pi 5**
> Test Details - The same as before but run on a less capable raspberry pi 5 that has a 2.4GHz CPU and only 4GB of RAM.

https://github.com/user-attachments/assets/2085fc5d-e957-4135-b423-461200a94125

**Ludicrous Load-Generation side by side**
> Test Details - Showcases the parity between pre-generated vanilla chunks loaded by ludicrous and landforms generated by ludicrous. Also shows the difference in capability between loading and generating chunks.

https://github.com/user-attachments/assets/459eac8c-7062-43e4-8729-6621a425b814

## Roadmap

- Finish development of terrain generation and add missing features (possibly implement a temporary lighting engine or algorithm for testing)

- Reevaluate or optimize server task management if necessary

- Design and implement lighting engine

- Add important game logic features that are essential to gameplay (entities, entity ai, block/entity interaction, dimension travel, chat features, etc.)

- Implement anti-cheat/basic protections

- TUI server manager?

## Credits

- Block/Biome/Item json mappings obtained from ViaVersion (https://github.com/ViaVersion/Mappings/tree/main/mappings) under public domain.
